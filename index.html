<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ArqFox - Conectando Pesquisadores</title>
<style>
    * { box-sizing: border-box; }
    body {
        margin: 0;
        font-family: "Segoe UI", Arial, sans-serif;
        background-color: #f9f6f1;
        color: #333;
    }
    header {
        background: linear-gradient(90deg, #4b2f1e, #7a4f2b);
        color: #fff;
        text-align: center;
        padding: 20px 10px;
    }
    header h1 { margin: 0; font-size: 2em; letter-spacing: 1px; }
    nav { margin-top: 10px; }
    nav a {
        color: #fff; text-decoration: none; margin: 0 12px; font-weight: bold;
        cursor: pointer;
    }
    main {
        max-width: 900px; margin: 30px auto; background: #fff;
        padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h2 { color: #4b2f1e; border-bottom: 2px solid #7a4f2b; padding-bottom: 5px; }
    form { display: flex; flex-direction: column; gap: 12px; margin-top: 15px; }
    input, textarea {
        padding: 10px; border-radius: 6px; border: 1px solid #ccc; font-size: 1em;
    }
    textarea { resize: vertical; min-height: 100px; }
    button {
        background: #4b2f1e; color: #fff; border: none; padding: 12px;
        border-radius: 6px; font-size: 1em; cursor: pointer; transition: 0.25s;
    }
    button:hover { background: #7a4f2b; }
    .card { background: #fafafa; padding: 15px; border-radius: 8px; margin: 10px 0;
        box-shadow: 0 2px 5px rgba(0,0,0,0.06); transition: transform 0.15s; }
    .card:hover { transform: translateY(-3px); }
    .card h3 { margin-top: 0; color: #4b2f1e; }
    footer { text-align: center; background: #4b2f1e; color: #fff; padding: 15px; margin-top: 40px; }
    section { display: none; }
    section.active { display: block; animation: fadeIn 0.35s; }
    .small { font-size: 0.9em; color: #666; }
    .video-wrap { position: relative; width: 100%; padding-bottom: 56.25%; /* 16:9 */ height: 0; margin-top: 12px; }
    .video-wrap iframe { position: absolute; top:0; left:0; width:100%; height:100%; border:0; border-radius:8px; }
    .curso-detalhe p { margin: 8px 0; line-height:1.45; color:#333; }
    .list-small { margin: 6px 0 12px 18px; color:#333; }
    .badge { display:inline-block; padding:6px 10px; background:#e9f5ea; color:#2f4f32; border-radius:12px; font-weight:600; margin-right:6px; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0); } }
    /* Cute tweaks (subtle) */
    .cute-title { font-family: 'Segoe UI', Tahoma, sans-serif; font-weight:700; letter-spacing:0.6px; }
    /* ====== ANIMA√á√ïES E ABA ATIVA ====== */
    nav a {
        position: relative;
        padding-bottom: 4px;
        transition: color 0.3s ease;
    }

    nav a::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        width: 0%;
        height: 3px;
        background: #ffd27f;
        transition: width 0.3s ease;
    }

    nav a:hover::after {
        width: 100%;
    }

    nav a.active {
        color: #ffd27f;
    }

    nav a.active::after {
        width: 100%;
    }

    /* Anima√ß√£o mais suave nas se√ß√µes */
    section {
        display: none;
        opacity: 0;
        transform: translateY(8px);
        transition: opacity 0.35s ease, transform 0.35s ease;
    }

    section.active {
        display: block;
        opacity: 1;
        transform: translateY(0);
    }

        /* ===== FAQ ACCORDION ===== */
    .faq-item {
        margin-bottom: 10px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }

    .faq-question {
        width: 100%;
        text-align: left;
        padding: 14px;
        font-size: 1em;
        font-weight: bold;
        background: #4b2f1e;
        color: white;
        border: none;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    .faq-question:hover {
        background: #7a4f2b;
    }

    .faq-answer {
        max-height: 0;
        overflow: hidden;
        background: #fff;
        transition: max-height 0.4s ease, padding 0.3s ease;
        padding: 0 14px;
    }

    .faq-answer p {
        margin: 10px 0;
    }

    .faq-item.active .faq-answer {
        max-height: 200px;
        padding: 10px 14px;
    }


</style>
</head>
<body>
<header>
<div style="position:relative; display:flex; align-items:center; justify-content:center; gap:12px;">    

<img src="https://www.mediafire.com/convkey/1584/fv1y7qgul4p54249g.jpg"
             alt="Logo ArqFox"
             style="height: 10em; width: auto; border-radius:6px;" />
    <!-- T√çTULO -->

    <!-- √ÅREA DO USU√ÅRIO -->
    <div class="top-right" id="userArea" style="position:absolute; right:12px; top:18px;"></div>
</div>


    <nav>
        <a onclick="mostrar('inicio')">In√≠cio</a>
        <a onclick="mostrar('cadastro')">Cadastrar</a>
        <a onclick="mostrar('contatos')">Contatos</a>
        <a onclick="mostrar('cursos')">Cursos</a>
        <a onclick="mostrar('certificados')">Certificados</a>
        <a onclick="mostrar('suporte')">Suporte</a>
        <a onclick="mostrar('sobre')">Sobre</a>
        <a onclick="mostrar('faq')">Perguntas Frequentes</a>

    </nav>
</header>

<main>
    <!-- IN√çCIO -->
    <section id="inicio" class="active">
        <h2>Bem-vindo ao ArqFox</h2>
        <p>Conecte-se com pesquisadores e arque√≥logos de v√°rios lugares, troque descobertas e colabore em projetos.</p>

        <h3>Entrar</h3>
        <form id="loginForm">
            <input type="email" id="loginEmail" placeholder="Seu e-mail" required />
            <input type="password" id="loginSenha" placeholder="Sua senha" required />
            <button type="submit">Entrar</button>
            <div id="loginMsg" class="small"></div>
        </form>
    </section>

    <!-- CADASTRO -->
    <section id="cadastro">
        <h2>Cadastrar Conta</h2>
        <form id="cadastroForm">
            <input type="text" id="nome" placeholder="Nome completo" required />
            <input type="email" id="email" placeholder="E-mail" required />
            <input type="password" id="senha" placeholder="Senha (m√≠n. 6 caracteres)" required />
            <input type="password" id="senhaConf" placeholder="Confirme a senha" required />
            <input type="text" id="especializacao" placeholder="√Årea de especializa√ß√£o" required />
            <input type="text" id="local" placeholder="Local de pesquisa" required />
            <button type="submit">Cadastrar</button>
            <div id="cadMsg" class="small"></div>
        </form>
    </section>

    <!-- CONTATOS -->
    <section id="contatos">
        <h2>Pesquisadores Cadastrados</h2>
        <div id="listaArqueologos"></div>
        <div id="contatosMsg" class="small"></div>
    </section>

    <!-- CURSOS -->
    <section id="cursos">
        <h2>Cursos ArqFox</h2>
        <p class="small">Selecione um curso para ver a descri√ß√£o t√©cnica e o v√≠deo de apoio.</p>
        <div id="listaCursos"></div>
        <div id="cursoConteudo" style="margin-top:20px;"></div>
    </section>

    <!-- CERTIFICADOS -->
    <section id="certificados">
        <h2>Seus Certificados</h2>
        <p class="small">Aqui aparecer√£o os certificados dos cursos finalizados (salvos localmente no seu navegador).</p>
        <div id="listaCertificados"></div>
    </section>
    
    <section id="faq">
        <h2>Perguntas Frequentes sobre Arqueologia</h2>

        <div class="faq-item">
            <button class="faq-question">O que √© arqueologia?</button>
            <div class="faq-answer">
                <p>A arqueologia estuda sociedades antigas atrav√©s de objetos, constru√ß√µes e vest√≠gios deixados pelos seres humanos.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question">Arque√≥logos estudam dinossauros?</button>
            <div class="faq-answer">
                <p>N√£o. Dinossauros s√£o estudados pela paleontologia. A arqueologia estuda a hist√≥ria humana.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question">Quais tecnologias a arqueologia usa hoje?</button>
            <div class="faq-answer">
                <p>Drones, escaneamento 3D, GPS, SIG, realidade aumentada e modelagem digital s√£o cada vez mais comuns.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question">O que √© um s√≠tio arqueol√≥gico?</button>
            <div class="faq-answer">
                <p>√â um local onde foram encontrados vest√≠gios de atividades humanas antigas, como ferramentas, cer√¢micas ou constru√ß√µes.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question">Por que a arqueologia √© importante?</button>
            <div class="faq-answer">
                <p>Ela preserva a hist√≥ria da humanidade e ajuda a entender como as civiliza√ß√µes evolu√≠ram ao longo do tempo.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question">Qual a diferen√ßa entre arqueologia e hist√≥ria?</button>
            <div class="faq-answer">
                <p>A hist√≥ria estuda o passado com base em documentos escritos. A arqueologia usa objetos e vest√≠gios materiais.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question">Como os arque√≥logos sabem a idade dos objetos?</button>
            <div class="faq-answer">
                <p>Usam t√©cnicas como data√ß√£o por carbono 14, an√°lise de camadas do solo e compara√ß√£o com artefatos j√° conhecidos.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question">Posso visitar um s√≠tio arqueol√≥gico?</button>
            <div class="faq-answer">
                <p>Alguns s√£o abertos ao p√∫blico, mas muitos s√£o protegidos por lei para evitar danos ao patrim√¥nio hist√≥rico.</p>
            </div>
        </div>

    </section>



    <!-- SUPORTE -->
    <section id="suporte">
        <h2>Suporte ArqFox</h2>
        <p>Fale diretamente com nossa equipe pelo e-mail:</p>
        <p><strong>E-mail:</strong>
           <a href="mailto:smartlegojuniorescolasesi@gmail.com">smartlegojuniorescolasesi@gmail.com</a>
        </p>
    </section>

    <!-- SOBRE -->
    <section id="sobre">
        <h2>Sobre o ArqFox</h2>

        <p>O <strong>ArqFox</strong> √© uma plataforma educacional criada para aproximar estudantes, pesquisadores e apaixonados por arqueologia.</p>

        <p>A arqueologia moderna utiliza tecnologias como <strong>drones, escaneamento 3D, realidade aumentada e impress√£o 3D</strong> para preservar e estudar o passado com maior precis√£o.</p>

        <h3>üéØ Miss√£o</h3>
        <p>Conectar pessoas, tecnologias e descobertas para preservar a hist√≥ria da humanidade.</p>

        <h3>üöÄ O que oferecemos</h3>
        <ul class="list-small">
            <li>Rede de pesquisadores e estudantes</li>
            <li>Cursos tecnol√≥gicos aplicados √† arqueologia</li>
            <li>Certificados de aprendizado</li>
            <li>Compartilhamento de conhecimento cient√≠fico</li>
        </ul>

        <h3>ü§ñ Projeto Educacional</h3>
        <p>Desenvolvido pela equipe <strong>Smart Lego Junior ‚Äî Escola Firjan SESI Resende</strong> unindo rob√≥tica, tecnologia e patrim√¥nio hist√≥rico.</p>

        <p class="small">Aprender o passado. Construir o futuro.</p>
    </section>

</main>

<footer>
    <p>¬© 2025 ArqFox - Rede de pesquisadores</p>
</footer>

<script>
/* ====== UTILIT√ÅRIOS DE ARMAZENAMENTO E AUTENTICA√á√ÉO ====== */
async function hashPassword(password) {
    const enc = new TextEncoder();
    const data = enc.encode(password);
    const hashBuffer = await crypto.subtle.digest('SHA-256', data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}

const STORAGE_USERS = 'arqfox_users_v1';
const STORAGE_CURRENT = 'arqfox_current_v1';
const STORAGE_CERTS = 'arqfox_certs_v1';

function loadUsers() { return JSON.parse(localStorage.getItem(STORAGE_USERS) || '[]'); }
function saveUsers(users) { localStorage.setItem(STORAGE_USERS, JSON.stringify(users)); }
function getCurrentUser() { return localStorage.getItem(STORAGE_CURRENT); }
function setCurrentUser(email) { localStorage.setItem(STORAGE_CURRENT, email); renderUserArea(); }
function clearCurrentUser() { localStorage.removeItem(STORAGE_CURRENT); renderUserArea(); }

function loadCerts() { return JSON.parse(localStorage.getItem(STORAGE_CERTS) || '{}'); }
function saveCerts(certs) { localStorage.setItem(STORAGE_CERTS, JSON.stringify(certs)); }

/* ====== NAVEGA√á√ÉO DE SE√á√ïES ====== */
function mostrar(id) {
    document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
    document.querySelectorAll("nav a").forEach(a => a.classList.remove("active"));

    const el = document.getElementById(id);
    if (el) el.classList.add("active");

    const linkAtivo = document.querySelector(`nav a[onclick="mostrar('${id}')"]`);
    if (linkAtivo) linkAtivo.classList.add("active");

    if (id === 'contatos') atualizarLista();
    if (id === 'cursos') carregarCursos();
    if (id === 'certificados') atualizarCertificados();
}


/* ====== √ÅREA DE USU√ÅRIO ====== */
function renderUserArea() {
    const area = document.getElementById('userArea');
    const email = getCurrentUser();
    if (email) {
        area.innerHTML = `
            <div style="text-align:right;">
                <div class="small">Conectado como <strong>${email}</strong></div>
                <button onclick="logout()" style="margin-top:6px;padding:6px 10px;font-size:0.9em;">Sair</button>
            </div>`;
    } else {
        area.innerHTML = '<div style="text-align:right;"><button onclick="mostrar(\'inicio\')">Entrar</button></div>';
    }
}

/* ====== CADASTRO ====== */
document.getElementById("cadastroForm").addEventListener("submit", async e => {
    e.preventDefault();
    const nome = document.getElementById("nome").value.trim();
    const email = document.getElementById("email").value.trim().toLowerCase();
    const senha = document.getElementById("senha").value;
    const senhaConf = document.getElementById("senhaConf").value;
    const especializacao = document.getElementById("especializacao").value.trim();
    const local = document.getElementById("local").value.trim();
    const msg = document.getElementById("cadMsg");
    msg.textContent = '';

    if (senha.length < 6) return msg.innerHTML = '<span class="error">Senha precisa ter pelo menos 6 caracteres.</span>';
    if (senha !== senhaConf) return msg.innerHTML = '<span class="error">As senhas n√£o conferem.</span>';

    const users = loadUsers();
    if (users.some(u => u.email === email)) return msg.innerHTML = '<span class="error">E-mail j√° cadastrado.</span>';

    const hash = await hashPassword(senha);
    users.push({ nome, email, hash, especializacao, local });
    saveUsers(users);
    setCurrentUser(email);
    msg.innerHTML = '<span class="success">Cadastro realizado com sucesso!</span>';
    e.target.reset();
    mostrar('contatos');
});

/* ====== LOGIN ====== */
document.getElementById("loginForm").addEventListener("submit", async e => {
    e.preventDefault();
    const email = document.getElementById("loginEmail").value.trim().toLowerCase();
    const senha = document.getElementById("loginSenha").value;
    const msg = document.getElementById("loginMsg");
    msg.textContent = '';

    const users = loadUsers();
    const user = users.find(u => u.email === email);
    if (!user) return msg.innerHTML = '<span class="error">Usu√°rio n√£o encontrado.</span>';

    const hash = await hashPassword(senha);
    if (hash !== user.hash) return msg.innerHTML = '<span class="error">Senha incorreta.</span>';

    setCurrentUser(email);
    msg.innerHTML = '<span class="success">Login bem-sucedido!</span>';
    document.getElementById("loginForm").reset();
    mostrar('contatos');
});

/* ====== LOGOUT ====== */
function logout() {
    clearCurrentUser();
    alert('Voc√™ saiu da conta.');
    mostrar('inicio');
}

/* ====== LISTA DE PESQUISADORES ====== */
function atualizarLista() {
    const lista = document.getElementById("listaArqueologos");
    const users = loadUsers();
    lista.innerHTML = users.length
        ? users.map(u => `
            <div class="card">
                <h3>${u.nome}</h3>
                <p><strong>Especializa√ß√£o:</strong> ${u.especializacao}</p>
                <p><strong>Local:</strong> ${u.local}</p>
                <p class="small">E-mail: <a href="mailto:${u.email}">${u.email}</a></p>
            </div>`).join('')
        : '<p class="small">Nenhum pesquisador cadastrado ainda.</p>';
}

/* ====== CURSOS (conte√∫do t√©cnico + v√≠deos embed) ====== */
const cursos = [
    {
        id: 1,
        nome: "Uso de Drones na Arqueologia",
        conteudo: {
            resumo: "Aplica√ß√µes de drones no mapeamento de s√≠tios, levantamento aerofotogram√©trico e monitoramento.",
            aprendizagem: [
                "Planejamento de voo para mapeamento (sobreposi√ß√£o de imagens, gcp).",
                "No√ß√µes de fotogrametria: captura, alinhamento e gera√ß√£o de ortofotos/DSM.",
                "Seguran√ßa, regulamentos e requisitos legais para opera√ß√£o em campo.",
                "Fluxo de trabalho: captura ‚Üí processamento (software) ‚Üí an√°lise."
            ],
            recomendacao: "Ideal para equipes de campo que precisam criar modelos 3D e mapas topogr√°ficos com custo reduzido."
        },
        videoId: "jH1aJSUrbTQ"
    },
    {
        id: 2,
        nome: "Escaneamento 3D (fotogrametria e scanners)",
        conteudo: {
            resumo: "T√©cnicas para digitalizar objetos e √°reas usando fotogrametria e scanners a laser.",
            aprendizagem: [
                "Diferen√ßa entre fotogrametria (fotos) e scanners (LIDAR/time-of-flight).",
                "Captura adequada: ilumina√ß√£o, n√∫mero de imagens e cobertura angular.",
                "P√≥s-processamento: registro de nuvens de pontos, limpeza e gera√ß√£o de malha.",
                "Exporta√ß√£o para formatos comuns (.obj, .ply) e prepara√ß√£o para impress√£o ou an√°lise."
            ],
            recomendacao: "√ötil para documenta√ß√£o de artefatos, reconstru√ß√µes digitais e preserva√ß√£o do patrim√¥nio."
        },
        videoId: "Gl-iY0sP2yg"
    },
    {
        id: 3,
        nome: "Realidade Aumentada aplicada ao Patrim√¥nio",
        conteudo: {
            resumo: "Uso de AR para visualizar reconstru√ß√µes, sobrepor informa√ß√µes e criar visitas guiadas interativas.",
            aprendizagem: [
                "Conceitos de rastreamento: presente (markerless) e baseado em marcadores.",
                "Otimiza√ß√£o de modelos 3D para AR (LOD, texturas, tamanho do arquivo).",
                "Plataformas e ferramentas: ARKit, ARCore, WebAR e frameworks de visualiza√ß√£o.",
                "Casos de uso: interpreta√ß√µes visuais, tours educativos e exibi√ß√µes em museus."
            ],
            recomendacao: "Aplic√°vel em projetos educativos e interpretativos, especialmente para p√∫blico leigo."
        },
        videoId: "PyHb8vEUgD4"
    },
    {
        id: 4,
        nome: "Impressoras 3D: do modelo √† r√©plica f√≠sica",
        conteudo: {
            resumo: "Processo de transformar um modelo digital em pe√ßa f√≠sica por impress√£o 3D; sele√ß√£o de materiais e par√¢metros.",
            aprendizagem: [
                "Tipos de impressora (FDM, SLA) e escolha de materiais (PLA, ABS, resinas).",
                "Prepara√ß√£o do modelo: malha limpa, suportes e fatiamento (slicing).",
                "Configura√ß√µes cr√≠ticas: temperatura, velocidade, altura de camada e ader√™ncia √† mesa.",
                "P√≥s-processamento: limpeza, cura (SLA) e acabamento."
            ],
            recomendacao: "Recomendado para prototipagem r√°pida, reprodu√ß√£o de artefatos para estudo e exposi√ß√µes."
        },
        videoId: "2vFdwz4U1VQ"
    },
    {
        id: 5,
        nome: "Inform√°tica B√°sica para Pesquisadores",
        conteudo: {
            resumo: "Fundamentos de inform√°tica para organizar dados arqueol√≥gicos.",
            aprendizagem: [
                "Organiza√ß√£o de arquivos e pastas de pesquisa",
                "Uso b√°sico de editores de texto e planilhas",
                "Backup e armazenamento em nuvem",
                "Seguran√ßa digital para pesquisadores"
            ],
            recomendacao: "Ideal para iniciantes que desejam melhorar a organiza√ß√£o de dados de campo."
        },
        videoId: "M5Y1m0G8k9Y"
    },
    {
        id: 6,
        nome: "Introdu√ß√£o aos Sistemas de Informa√ß√£o Geogr√°fica (SIG)",
        conteudo: {
            resumo: "Uso de mapas digitais e geolocaliza√ß√£o na an√°lise de s√≠tios arqueol√≥gicos.",
            aprendizagem: [
                "No√ß√µes de coordenadas geogr√°ficas",
                "Cria√ß√£o de mapas tem√°ticos",
                "Importa√ß√£o de dados de GPS e drones",
                "An√°lise espacial aplicada √† arqueologia"
            ],
            recomendacao: "Importante para pesquisadores que trabalham com mapeamento e localiza√ß√£o de s√≠tios."
        },
        videoId: "kIID5FDi2JQ"
    }

];

/* Renderiza a lista de cursos */
function carregarCursos() {
    const lista = document.getElementById("listaCursos");
    lista.innerHTML = cursos.map(c => `
        <div class="card">
            <h3>${c.nome}</h3>
            <p class="small">${c.conteudo.resumo}</p>
            <button onclick="abrirCurso(${c.id})">Ver detalhes</button>
        </div>
    `).join('');
}

/* Abre os detalhes do curso com explica√ß√£o estruturada e v√≠deo embutido */
function abrirCurso(id) {
    const curso = cursos.find(c => c.id === id);
    if (!curso) return;

    const detalhesHTML = `
        <div class="card curso-detalhe">
            <h3>${curso.nome}</h3>
            <p><strong>Resumo:</strong> ${curso.conteudo.resumo}</p>

            <p><strong>O que voc√™ aprender√°:</strong></p>
            <ul class="list-small">
                ${curso.conteudo.aprendizagem.map(item => `<li>${item}</li>`).join('')}
            </ul>

            <p><strong>Recomenda√ß√£o de uso:</strong> ${curso.conteudo.recomendacao}</p>

            <h4>V√≠deo de apoio</h4>
            <div class="video-wrap">
                <iframe src="https://www.youtube.com/embed/${curso.videoId}"
                        title="${curso.nome} - v√≠deo" allowfullscreen></iframe>
            </div>

            <div style="margin-top:12px; display:flex; gap:8px;">
                <button onclick="finalizarCurso(${curso.id})">Finalizar curso</button>
                <button onclick="baixarCertificado(${curso.id})">Baixar certificado (PDF)</button>
            </div>

            <p class="small" style="margin-top:10px;">
                Observa√ß√£o: o v√≠deo √© material de apoio introdut√≥rio. O curso pode ser expandido com exerc√≠cios pr√°ticos,
                m√≥dulos espec√≠ficos e avalia√ß√£o, se desejar.
            </p>
        </div>
    `;

    document.getElementById("cursoConteudo").innerHTML = detalhesHTML;
}

/* Finalizar curso -> grava certificado para o usu√°rio atual */
function finalizarCurso(cursoId) {
    const user = getCurrentUser();
    if (!user) { alert('Fa√ßa login antes de finalizar um curso.'); return; }
    const curso = cursos.find(c => c.id === cursoId);
    if (!curso) return;

    const certs = loadCerts();
    if (!certs[user]) certs[user] = [];
    // n√£o duplicar
    if (!certs[user].includes(curso.nome)) {
        certs[user].push(curso.nome);
        saveCerts(certs);
        alert('Curso conclu√≠do! Certificado adicionado ao seu perfil.');
        atualizarCertificados();
    } else {
        alert('Voc√™ j√° concluiu este curso.');
    }
}

/* Gera um PDF simples e baixa (cliente) ‚Äî usa janela de impress√£o para simplicidade */
function baixarCertificado(cursoId) {
    const user = getCurrentUser();
    if (!user) { alert('Fa√ßa login para baixar certificados.'); return; }
    const curso = cursos.find(c => c.id === cursoId);
    if (!curso) return;

    const users = loadUsers();
    const pessoa = users.find(u => u.email === user) || { nome: user };

    // Cria HTML simples para impress√£o/PDF
    const html = `
        <html>
        <head>
            <meta charset="utf-8"/>
            <title>Certificado - ${curso.nome}</title>
            <style>
                body { font-family: Arial, sans-serif; text-align:center; padding:40px; }
                .card { border: 6px solid #4b2f1e; padding:30px; border-radius:12px; }
                h1 { margin:0; color:#4b2f1e; }
                p { margin:8px 0; }
            </style>
        </head>
        <body>
            <div class="card">
                <h1>Certificado de Conclus√£o</h1>
                <p class="small">Certificamos que</p>
                <h2>${pessoa.nome}</h2>
                <p class="small">concluiu com √™xito o curso</p>
                <h3>${curso.nome}</h3>
                <p class="small">em ${new Date().toLocaleDateString()}</p>
            </div>
        </body>
        </html>
    `;

    const w = window.open('', '_blank');
    if (!w) { alert('Bloqueador de pop-ups impediu o download. Permita pop-ups para baixar.'); return; }
    w.document.write(html);
    w.document.close();
    // delay pequeno para garantir renderiza√ß√£o antes de imprimir
    setTimeout(() => { w.print(); /* w.close(); keep open so user can save */ }, 300);
}

/* Atualiza a lista de certificados na aba */
function atualizarCertificados() {
    const container = document.getElementById('listaCertificados');
    const user = getCurrentUser();
    if (!user) {
        container.innerHTML = '<p class="small">Fa√ßa login para ver seus certificados.</p>';
        return;
    }
    const certs = loadCerts();
    const meus = certs[user] || [];
    if (!meus.length) {
        container.innerHTML = '<p class="small">Voc√™ ainda n√£o concluiu nenhum curso.</p>';
        return;
    }

    container.innerHTML = meus.map(c => `
        <div class="card" style="display:flex; align-items:center; justify-content:space-between;">
            <div>
                <span class="badge">‚úì Certificado</span>
                <strong>${c}</strong>
                <div class="small">Emitido em: ${new Date().toLocaleDateString()}</div>
            </div>
            <div>
                <button onclick="baixarCertificadoPorNome('${encodeURIComponent(c)}')">Baixar</button>
            </div>
        </div>
    `).join('');
}

/* Baixar certificado por nome (procura curso correspondente) */
function baixarCertificadoPorNome(nomeEncoded) {
    const nome = decodeURIComponent(nomeEncoded);
    const curso = cursos.find(c => c.nome === nome);
    if (!curso) {
        // gerar certificado gen√©rico mesmo assim
        const fakeCurso = { id: 0, nome };
        const users = loadUsers();
        const pessoa = users.find(u => u.email === getCurrentUser()) || { nome: getCurrentUser() };
        const html = `
            <html><head><meta charset="utf-8"/><title>Certificado - ${nome}</title></head>
            <body><h1>Certificado: ${nome}</h1><p>${pessoa.nome}</p></body></html>
        `;
        const w = window.open('', '_blank'); if (!w) { alert('Bloqueador de pop-ups impediu o download.'); return; }
        w.document.write(html); w.document.close(); setTimeout(() => { w.print(); }, 200);
        return;
    }
    baixarCertificado(curso.id);
}

/* ====== INICIALIZA√á√ÉO ====== */
(function init() {
    renderUserArea();
    atualizarLista();
    carregarCursos();
})();
</script>
<script>
document.querySelectorAll(".faq-question").forEach(button => {
    button.addEventListener("click", () => {
        const item = button.parentElement;

        // Fecha outros (opcional ‚Äì efeito acorde√£o cl√°ssico)
        document.querySelectorAll(".faq-item").forEach(f => {
            if (f !== item) f.classList.remove("active");
        });

        // Abre ou fecha o atual
        item.classList.toggle("active");
    });
});
</script>

</body>
</html>
